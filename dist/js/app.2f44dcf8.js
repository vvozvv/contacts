(function(t){function e(e){for(var c,a,i=e[0],s=e[1],l=e[2],u=0,d=[];u<i.length;u++)a=i[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(t[c]=s[c]);b&&b(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],c=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(c=!1)}c&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var c={},r={app:0},o=[];function a(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-2d0cbae0":"643dd108"}[t]+".js"}function i(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var c=new Promise((function(e,c){n=r[t]=[e,c]}));e.push(n[2]=c);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=a(t);var l=new Error;o=function(e){s.onerror=s.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var c=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+c+": "+o+")",l.name="ChunkLoadError",l.type=c,l.request=o,n[1](l)}r[t]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(e)},i.m=t,i.c=c,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)i.d(n,c,function(e){return t[e]}.bind(null,c));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var b=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"10a3":function(t,e,n){"use strict";n("5c22")},"2a6b":function(t,e,n){},"4f84":function(t,e,n){"use strict";n("855b")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23");function r(t,e,n,r,o,a){var i=Object(c["y"])("router-view");return Object(c["q"])(),Object(c["e"])(i)}var o={name:"App"};n("10a3");o.render=r;var a=o,i=n("5530"),s=(n("99af"),n("c740"),n("4de4"),n("7db0"),n("5502")),l=Object(s["a"])({state:{contact:JSON.parse(localStorage.getItem("contacts"))||[]},mutations:{GET_CONTACT:function(t,e){t.contact.push(e),localStorage.setItem("contacts",JSON.stringify(t.contact))},REMOVE_CONTACT:function(t,e){t.contact=e,localStorage.setItem("contacts",JSON.stringify(e))},UPDATE_CONTACT:function(t,e){var n=t.contact.concat(),c=n.findIndex((function(t){return t.id===e.id})),r=n[c];n[c]=Object(i["a"])(Object(i["a"])({},e),{},{archive:r}),t.contact=n,localStorage.setItem("contacts",JSON.stringify(n))},RETURN_LAST_VERSION:function(t,e){var n=t.contact.concat(),c=n.findIndex((function(t){return t.id===e.id})),r=n[c];console.log(r.archive,e),n[c]=Object(i["a"])(Object(i["a"])({},r.archive),{},{archive:e}),t.contact=n,localStorage.setItem("contacts",JSON.stringify(n))}},actions:{addContact:function(t,e){var n=t.commit;n("GET_CONTACT",e)},updateContact:function(t,e){var n=t.commit;n("UPDATE_CONTACT",e)},returnVersion:function(t,e){var n=t.commit;n("RETURN_LAST_VERSION",e)},removeContact:function(t,e){var n=t.commit,c=t.state,r=c.contact.filter((function(t){return t.id!==e}));n("REMOVE_CONTACT",r)}},getters:{contactsList:function(t){return t.contact},contactFindById:function(t){return function(e){return t.contact.find((function(t){return t.id==e}))}}}}),u=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),b=(n("b0c0"),Object(c["H"])("data-v-3f9c591b"));Object(c["t"])("data-v-3f9c591b");var d={class:"page"},f={class:"container"},h=Object(c["h"])("div",{class:"page-header"},[Object(c["h"])("h1",{class:"page-header__title"},"Добавить контакт")],-1),p={class:"page__row"},O={class:"box"},j={action:"",class:"form"},m={class:"form__box"},v=Object(c["h"])("label",{class:"form__label"},"Имя контакта",-1),_=Object(c["h"])("label",{for:"",class:"form__label form__label--outer"}," Дополнительные поля ",-1),g=Object(c["h"])("svg",{width:"18",height:"18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(c["h"])("path",{d:"M13.5 4.5l-9 9M4.5 4.5l9 9",stroke:"#fff","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),w={class:"form-preview"},y={class:"box"},C={class:"form-preview__title"},k={class:"form-preview__list"},x={key:0,class:"form-preview__text form-preview__text--title"},T={class:"form-preview__text"},S={class:"form-preview__date"},A={key:0,class:"box"},q={class:"form-preview__list"},N={class:"form-preview__text form-preview__text--danger"};Object(c["r"])();var D=b((function(t,e,n,r,o,a){return Object(c["q"])(),Object(c["e"])("div",d,[Object(c["h"])("div",f,[h,Object(c["h"])("div",p,[Object(c["h"])("div",O,[Object(c["h"])("div",j,[Object(c["h"])("div",m,[v,Object(c["G"])(Object(c["h"])("input",{type:"text",class:["form__input",{error:o.name.error}],"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.name=t}),placeholder:"Имя контакта"},null,2),[[c["C"],o.name]])]),_,(Object(c["q"])(!0),Object(c["e"])(c["a"],null,Object(c["x"])(o.fields,(function(t,e){return Object(c["q"])(),Object(c["e"])("div",{key:e,class:"form__row"},[Object(c["G"])(Object(c["h"])("input",{type:"text",class:["form__input",{error:t.error}],"onUpdate:modelValue":function(e){return t.name=e},placeholder:"Название"},null,10,["onUpdate:modelValue"]),[[c["C"],t.name]]),Object(c["G"])(Object(c["h"])("input",{type:"text",class:["form__input",{error:t.error}],"onUpdate:modelValue":function(e){return t.value=e},placeholder:"Значение"},null,10,["onUpdate:modelValue"]),[[c["C"],t.value]]),Object(c["h"])("button",{class:"btn form__delete",onClick:function(t){return a.removeFiled(e)}},[g],8,["onClick"])])})),128)),Object(c["h"])("button",{class:"btn",onClick:e[2]||(e[2]=function(){return a.addFiled&&a.addFiled.apply(a,arguments)})},"Добавить поле")])]),Object(c["h"])("div",w,[Object(c["h"])("div",y,[Object(c["h"])("p",C,Object(c["A"])(o.name),1),Object(c["h"])("ul",k,[(Object(c["q"])(!0),Object(c["e"])(c["a"],null,Object(c["x"])(o.fields,(function(t,e){return Object(c["q"])(),Object(c["e"])("li",{key:e,class:"form-preview__item"},[t.name?(Object(c["q"])(),Object(c["e"])("p",x,Object(c["A"])(t.name)+": ",1)):Object(c["f"])("",!0),Object(c["h"])("p",T,Object(c["A"])(t.value),1)])})),128))]),Object(c["h"])("p",S,"Дата создания: "+Object(c["A"])(o.date),1),o.isArchive?(Object(c["q"])(),Object(c["e"])("button",{key:0,onClick:e[3]||(e[3]=function(){return a.returnVersion&&a.returnVersion.apply(a,arguments)}),class:"btn form-preview__btn"}," Вернуть прошлую версию ")):Object(c["f"])("",!0),o.oneContact?(Object(c["q"])(),Object(c["e"])("button",{key:1,onClick:e[4]||(e[4]=function(){return a.updateContact&&a.updateContact.apply(a,arguments)}),class:[{"btn--disabled":a.checkUpdate},"btn form-preview__btn"]}," Обновить ",2)):(Object(c["q"])(),Object(c["e"])("button",{key:2,onClick:e[5]||(e[5]=function(){return a.addToCont&&a.addToCont.apply(a,arguments)}),class:"btn form-preview__btn"}," Создать ")),o.oneContact?(Object(c["q"])(),Object(c["e"])("button",{key:3,onClick:e[6]||(e[6]=function(){return a.removeContact&&a.removeContact.apply(a,arguments)}),class:"btn btn--danger form-preview__btn"}," Удалить ")):Object(c["f"])("",!0)]),o.errors.length?(Object(c["q"])(),Object(c["e"])("div",A,[Object(c["h"])("ul",q,[(Object(c["q"])(!0),Object(c["e"])(c["a"],null,Object(c["x"])(o.errors,(function(t,e){return Object(c["q"])(),Object(c["e"])("li",{key:e,class:"form-preview__item"},[Object(c["h"])("p",N,Object(c["A"])(t.title),1)])})),128))])])):Object(c["f"])("",!0)])])])])})),E=(n("159b"),{data:function(){return{name:"",date:"",id:"",fields:[],oneContact:null,isArchive:!1,errors:[]}},mounted:function(){this.date=(new Date).toLocaleDateString();var t=this.$store.getters.contactFindById(this.$route.params.id);t&&(this.name=t.name,this.fields=t.fields,this.date=t.date,this.id=t.id,this.isArchive=!!t.archive,this.oneContact=JSON.parse(JSON.stringify(t)))},computed:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["contactsList"])),{},{contact:function(){var t={id:this.id?this.id:Date.now(),name:this.name,fields:this.fields,date:(new Date).toLocaleDateString()};return t},checkUpdate:function(){return delete this.oneContact["archive"],JSON.stringify(this.contact)===JSON.stringify(this.oneContact)}}),methods:{addFiled:function(){this.fields.push({name:"",value:""})},removeFiled:function(t){confirm("Вы действительно хотите удалить поле?")&&(this.fields=this.fields.filter((function(e,n){return n!=t})))},checkForm:function(){this.errors=[];var t=0;this.name||this.errors.push({title:"Вы не указали имя контакта"}),this.fields.forEach((function(e){""==e.name||""==e.value?(e.error=!0,t++):e.error=!1})),t&&this.errors.push({title:"У вас ".concat(t," незаполных поля")})},addToCont:function(){this.checkForm(),this.errors.length||(this.$store.dispatch("addContact",this.contact),this.$router.push("/"),this.$toast.success("Контакт добавлен!"))},updateContact:function(){this.checkForm(),confirm("Вы точно хотите обновить контакт?")&&!this.errors.length&&(this.$store.dispatch("updateContact",this.contact),this.$router.push("/"),this.$toast.info("Контакт обвновлен!"))},returnVersion:function(){confirm("Вы уверены? Все текущие данные могут измениться")&&(this.$store.dispatch("returnVersion",this.contact),this.$router.push("/"),this.$toast.warning("Даные обновленны!"))},removeContact:function(){confirm("Вы точно хотите удалить контакт?")&&(this.$store.dispatch("removeContact",this.oneContact.id),this.$router.push("/"),this.$toast.warning("Контакт удален!"))}}});n("4f84");E.render=D,E.__scopeId="data-v-3f9c591b";var V=E,$={class:"page"},F={class:"container"},I={class:"page-header"},J=Object(c["h"])("h1",{class:"page-header__title"},"Список контактов",-1),M=Object(c["g"])("Добавить контакт"),L={class:"box"};function P(t,e,n,r,o,a){var i=Object(c["y"])("router-link"),s=Object(c["y"])("Table");return Object(c["q"])(),Object(c["e"])("div",$,[Object(c["h"])("div",F,[Object(c["h"])("div",I,[J,Object(c["h"])(i,{to:"/form",class:"btn"},{default:Object(c["F"])((function(){return[M]})),_:1})]),Object(c["h"])("div",L,[Object(c["h"])(s)])])])}var U=Object(c["H"])("data-v-70fdc31d");Object(c["t"])("data-v-70fdc31d");var R={class:"table"},G={key:1,class:"table__text"},H=Object(c["g"])(" Пока у вас нет контактов. "),B=Object(c["g"])(" Добавить первый ");Object(c["r"])();var z=U((function(t,e,n,r,o,a){var i=Object(c["y"])("TableRow"),s=Object(c["y"])("router-link");return Object(c["q"])(),Object(c["e"])("div",R,[t.contactsList.length?(Object(c["q"])(!0),Object(c["e"])(c["a"],{key:0},Object(c["x"])(t.contactsList,(function(t,e){return Object(c["q"])(),Object(c["e"])(i,{key:e,item:t},null,8,["item"])})),128)):(Object(c["q"])(),Object(c["e"])("p",G,[H,Object(c["h"])(s,{to:"/form",class:"table__link"},{default:U((function(){return[B]})),_:1})]))])})),K={class:"table__row"},Q={class:"table__name"},W={class:"table__box"},X=Object(c["h"])("svg",{width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(c["h"])("path",{d:"M12 5v14M19 12l-7 7-7-7",stroke:"#182347","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Y=Object(c["g"])(" Открыть "),Z=Object(c["h"])("svg",{width:"17",height:"17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(c["h"])("path",{d:"M2.125 4.958h12.75M5.667 4.958V3.542a1.417 1.417 0 011.416-1.417h2.834a1.417 1.417 0 011.416 1.417v1.416m2.125 0v9.917a1.416 1.416 0 01-1.416 1.417H4.958a1.417 1.417 0 01-1.416-1.417V4.958h9.916z",stroke:"#FC4C41","stroke-linecap":"round","stroke-linejoin":"round"})],-1),tt={class:"table__list"};function et(t,e,n,r,o,a){var i=Object(c["y"])("router-link");return Object(c["q"])(),Object(c["e"])("div",K,[Object(c["h"])("p",Q,Object(c["A"])(n.item.name),1),Object(c["h"])("div",W,[Object(c["h"])("div",{onClick:e[1]||(e[1]=function(){return a.toggleDesc&&a.toggleDesc.apply(a,arguments)}),class:[{"table__arrow--open":o.openDesc},"table__arrow"]},[X],2),Object(c["h"])(i,{to:{name:"form-item",params:{id:n.item.id}},item:n.item,class:"btn"},{default:Object(c["F"])((function(){return[Y]})),_:1},8,["to","item"]),Object(c["h"])("button",{class:"btn btn--icon btn--danger",onClick:e[2]||(e[2]=function(){return a.removeContact&&a.removeContact.apply(a,arguments)})},[Z])]),Object(c["G"])(Object(c["h"])("ul",tt,[(Object(c["q"])(!0),Object(c["e"])(c["a"],null,Object(c["x"])(n.item.fields,(function(t,e){return Object(c["q"])(),Object(c["e"])("li",{key:e,class:"table__item"},[Object(c["h"])("span",null,Object(c["A"])(t.name)+":",1),Object(c["h"])("span",null,Object(c["A"])(t.value),1)])})),128))],512),[[c["D"],o.openDesc]])])}var nt={props:{item:JSON},data:function(){return{openDesc:!1}},methods:{toggleDesc:function(){this.openDesc=!this.openDesc},removeContact:function(){confirm("Вы действительно хотите удалить контакт?")&&(this.$store.dispatch("removeContact",this.item.id),this.$toast.warning("Контакт удален!"))}}};nt.render=et;var ct=nt,rt={components:{TableRow:ct},computed:Object(i["a"])({},Object(s["b"])(["contactsList"]))};n("7e34");rt.render=z,rt.__scopeId="data-v-70fdc31d";var ot=rt,at={components:{Table:ot}};at.render=P;var it=at,st=[{path:"/",name:"main",component:it},{path:"/form",name:"form",component:V},{path:"/form/:id",name:"form-item",component:V},{path:"/404",name:"404",component:function(){return n.e("chunk-2d0cbae0").then(n.bind(null,"4b62"))}},{path:"/:catchAll(.*)",component:function(){return n.e("chunk-2d0cbae0").then(n.bind(null,"4b62"))}}],lt=Object(u["a"])({history:Object(u["b"])("/"),routes:st}),ut=lt,bt=n("af56");Object(c["d"])(a).use(l).use(ut).use(bt["a"]).mount("#app")},"5c22":function(t,e,n){},"7e34":function(t,e,n){"use strict";n("2a6b")},"855b":function(t,e,n){}});
//# sourceMappingURL=app.2f44dcf8.js.map